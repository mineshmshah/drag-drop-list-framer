{"ast":null,"code":"import { clamp, distance } from \"@popmotion/popcorn\";\n// Prevent rapid reverse swapping\nvar buffer = 5;\nexport var findIndex = function findIndex(i, yOffset, positions) {\n  console.log(positions);\n  var target = i;\n  var _positions$i = positions[i],\n      top = _positions$i.top,\n      height = _positions$i.height;\n  var bottom = top + height; // If moving down\n\n  if (yOffset > 0) {\n    var nextItem = positions[i + 1];\n    if (nextItem === undefined) return i;\n    var swapOffset = distance(bottom, nextItem.top + nextItem.height / 2) + buffer;\n    if (yOffset > swapOffset) target = i + 1; // If moving up\n  } else if (yOffset < 0) {\n    var prevItem = positions[i - 1];\n    if (prevItem === undefined) return i;\n    var prevBottom = prevItem.top + prevItem.height;\n\n    var _swapOffset = distance(top, prevBottom - prevItem.height / 2) + buffer;\n\n    if (yOffset < -_swapOffset) target = i - 1;\n  }\n\n  return clamp(0, positions.length, target);\n};","map":{"version":3,"sources":["/Users/mineshshah/minesh/drag-drop-list-framer/src/find-index.ts"],"names":["clamp","distance","buffer","findIndex","i","yOffset","positions","console","log","target","top","height","bottom","nextItem","undefined","swapOffset","prevItem","prevBottom","length"],"mappings":"AAAA,SAASA,KAAT,EAAgBC,QAAhB,QAAgC,oBAAhC;AAQA;AACA,IAAMC,MAAM,GAAG,CAAf;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CACvBC,CADuB,EAEvBC,OAFuB,EAGvBC,SAHuB,EAIpB;AACHC,EAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AACA,MAAIG,MAAM,GAAGL,CAAb;AAFG,qBAGqBE,SAAS,CAACF,CAAD,CAH9B;AAAA,MAGKM,GAHL,gBAGKA,GAHL;AAAA,MAGUC,MAHV,gBAGUA,MAHV;AAIH,MAAMC,MAAM,GAAGF,GAAG,GAAGC,MAArB,CAJG,CAMH;;AACA,MAAIN,OAAO,GAAG,CAAd,EAAiB;AACf,QAAMQ,QAAQ,GAAGP,SAAS,CAACF,CAAC,GAAG,CAAL,CAA1B;AACA,QAAIS,QAAQ,KAAKC,SAAjB,EAA4B,OAAOV,CAAP;AAE5B,QAAMW,UAAU,GACdd,QAAQ,CAACW,MAAD,EAASC,QAAQ,CAACH,GAAT,GAAeG,QAAQ,CAACF,MAAT,GAAkB,CAA1C,CAAR,GAAuDT,MADzD;AAEA,QAAIG,OAAO,GAAGU,UAAd,EAA0BN,MAAM,GAAGL,CAAC,GAAG,CAAb,CANX,CAQf;AACD,GATD,MASO,IAAIC,OAAO,GAAG,CAAd,EAAiB;AACtB,QAAMW,QAAQ,GAAGV,SAAS,CAACF,CAAC,GAAG,CAAL,CAA1B;AACA,QAAIY,QAAQ,KAAKF,SAAjB,EAA4B,OAAOV,CAAP;AAE5B,QAAMa,UAAU,GAAGD,QAAQ,CAACN,GAAT,GAAeM,QAAQ,CAACL,MAA3C;;AACA,QAAMI,WAAU,GAAGd,QAAQ,CAACS,GAAD,EAAMO,UAAU,GAAGD,QAAQ,CAACL,MAAT,GAAkB,CAArC,CAAR,GAAkDT,MAArE;;AACA,QAAIG,OAAO,GAAG,CAACU,WAAf,EAA2BN,MAAM,GAAGL,CAAC,GAAG,CAAb;AAC5B;;AAED,SAAOJ,KAAK,CAAC,CAAD,EAAIM,SAAS,CAACY,MAAd,EAAsBT,MAAtB,CAAZ;AACD,CA9BM","sourcesContent":["import { clamp, distance } from \"@popmotion/popcorn\";\n\nexport interface Position {\n  top: number;\n  height: number;\n  elements?: any\n}\n\n// Prevent rapid reverse swapping\nconst buffer = 5;\n\nexport const findIndex = (\n  i: number,\n  yOffset: number,\n  positions: Position[]\n) => {\n  console.log(positions)\n  let target = i;\n  const { top, height } = positions[i];\n  const bottom = top + height;\n\n  // If moving down\n  if (yOffset > 0) {\n    const nextItem = positions[i + 1];\n    if (nextItem === undefined) return i;\n\n    const swapOffset =\n      distance(bottom, nextItem.top + nextItem.height / 2) + buffer;\n    if (yOffset > swapOffset) target = i + 1;\n\n    // If moving up\n  } else if (yOffset < 0) {\n    const prevItem = positions[i - 1];\n    if (prevItem === undefined) return i;\n\n    const prevBottom = prevItem.top + prevItem.height;\n    const swapOffset = distance(top, prevBottom - prevItem.height / 2) + buffer;\n    if (yOffset < -swapOffset) target = i - 1;\n  }\n\n  return clamp(0, positions.length, target);\n};\n"]},"metadata":{},"sourceType":"module"}